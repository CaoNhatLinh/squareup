const { admin } = require('../config/firebaseAdmin');async function getDecodedUserFromRequest(req) {    const sessionCookie = req.cookies && req.cookies.session;    const authHeader = req.headers && req.headers.authorization;    if (sessionCookie) {        try {            const decodedClaims = await admin.auth().verifySessionCookie(sessionCookie, true);            return decodedClaims;        } catch (error) {        }    }    if (authHeader && authHeader.startsWith('Bearer ')) {        const idToken = authHeader.split('Bearer ')[1];        try {            const decodedToken = await admin.auth().verifyIdToken(idToken);            return decodedToken;        } catch (error) {        }    }    throw new Error('Unauthorized: No valid session or token found');}module.exports = { getDecodedUserFromRequest };